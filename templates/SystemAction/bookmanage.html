{% extends "base.html" %}

{% block title %}
    图书管理
{% endblock %}

{% block content %}

    <div class="panel panel-primary">
    {# 反爬虫验证   #}
    {% csrf_token %}

    {#  书籍表格 #}
    <table class="table table-striped">
        <caption> 图书管理</caption>
        <thead>
        {#    表头    #}
            <tr>
                <th>ISBN</th>
                <th>名称</th>
                <th>作者</th>
                <th>出版社</th>
                <th>出版年份</th>
                <th>类型</th>
                <th>总量</th>
                <th>剩余数量</th>
                <th>操作</th>
            </tr>
        </thead>

        {#   表格内容     #}
        {% for item in booklist %}

            <tr>

            <th>{{ item.book_id }}</th>
            <th>{{ item.book_name}}</th>
            <th>{{ item.author}}</th>
            <th>{{ item.press}}</th>
            <th>{{ item.publication_year }}</th>
            <th>{{ item.category_id }}</th>
            <th>{{ item.inventory }}</th>
            <th>{{ item.remain_num}}</th>
            <th>

            {#    按钮      #}

                <button class="btn  btn-success" data-toggle="modal" data-target="#editModal" style="font-family: 微软雅黑" >
                    修改
                </button>

                <!-- 模态框（Modal） -->
                <div class="modal fade" id="editModal" tabindex="-1" role="dialog"
                   aria-labelledby="myModalLabel" aria-hidden="true">
                   <div class="modal-dialog">
                      <div class="modal-content">
                         <div class="modal-header">
                            <button type="button" class="close"
                               data-dismiss="modal" aria-hidden="true">
                                  &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                               修改书籍信息
                            </h4>
                         </div>
                         <div class="modal-body">

                             {#表单#}
                            <form method='post' role="form" class="form-horizontal" >
                            {% csrf_token %}


                                {#    表单内容        #}
                                {% for item in form %}
                                    <div class="form-group">
                                        <label class="control-label col-md-2">{{item.label}}</label>
                                        <div class="col-md-2">
                                            {{item}}
                                        </div>
                                        <div class="col-md-offset-1 ">
                                            {{item.errors}}
                                        </div>
                                    </div>
                                {% endfor %}
                            </form>

                         </div>
                         <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                               data-dismiss="modal">关闭
                            </button>
                            <button type="button" class="btn btn-primary">
                               提交更改
                            </button>
                         </div>
                      </div><!-- /.modal-content -->
                </div><!-- /.modal -->

                </div>

                <a  href={% url 'delbook' item.book_id %} onclick= "return confirm('是否确认删除？')">
                    <span class="btn  btn-danger" style="font-family: 微软雅黑">
                        删除
                    </span>
                </a>

            </th>
            </tr>
        {% endfor %}

    </table>


    </div>
{% endblock %}
